-- SprintController.lua
local UserInputService = game:GetService("UserInputService")

local SprintController = {}

local DEFAULT_WALK_SPEED = 16
local SPRINT_SPEED = 32
local sprintEnabled = false

function SprintController.init(realHumanoid: Humanoid, fakeHumanoid: Humanoid)
	-- Set initial walk speeds
	realHumanoid.WalkSpeed = DEFAULT_WALK_SPEED
	fakeHumanoid.WalkSpeed = DEFAULT_WALK_SPEED

	-- Handle sprint input
	UserInputService.InputBegan:Connect(function(input, gameProcessed)
		if not gameProcessed and input.KeyCode == Enum.KeyCode.LeftShift then
			sprintEnabled = true
			realHumanoid.WalkSpeed = SPRINT_SPEED
			fakeHumanoid.WalkSpeed = SPRINT_SPEED
		end
	end)

	UserInputService.InputEnded:Connect(function(input, _)
		if input.KeyCode == Enum.KeyCode.LeftShift then
			sprintEnabled = false
			realHumanoid.WalkSpeed = DEFAULT_WALK_SPEED
			fakeHumanoid.WalkSpeed = DEFAULT_WALK_SPEED
		end
	end)
end

function SprintController.isSprintEnabled()
	return sprintEnabled
end

return SprintController
